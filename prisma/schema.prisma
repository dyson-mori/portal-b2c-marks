// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Product {
  id String @id @default(uuid())

  name        String
  description String
  price       String

  created_at DateTime @default(now())

  files    Files[]
  category Category[]
  purchase Purchase[]

  @@map("products")
}

model Files {
  id String @id @default(cuid())

  product_id    String
  cloudinary_id String

  url    String
  width  String
  height String
  code   String

  product Product @relation(fields: [product_id], references: [id], onDelete: Cascade)

  @@index([product_id])
  @@map("files")
}

model Category {
  id   String @id @default(cuid())
  name String @unique

  product Product[]

  created_at DateTime @default(now())

  @@map("categories")
}

model Address {
  id String @id @default(cuid())

  code_address String // code for cookies

  firstname   String
  lastname    String
  description String?
  // status      String // start and finish

  neighborhood String // Eldorado
  city         String // Contagem
  street       String // Rua Acacias
  cep          String // 32310370
  state        String // MG
  number       String // 920
  phone        String // (00) 0 0000 0000

  purchase Purchase[]

  @@map("address")
}

model Purchase {
  id String @id @default(cuid())

  address_id String
  address    Address @relation(fields: [address_id], references: [id])

  product_id String
  product    Product @relation(fields: [product_id], references: [id])

  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("purchases")
}

// model Cart {
//   id String @id @default(cuid())

//   address_id String
//   address    Address @relation(fields: [address_id], references: [id])

//   product_id String
//   product    Product @relation(fields: [product_id], references: [id])

//   created_at DateTime @default(now())
//   updated_at DateTime @updatedAt

//   @@map("carts")
// }

// https://www.restapitutorial.com/httpstatuscodes.html

// https://www.prisma.io/docs/concepts/components/prisma-client/working-with-fields/working-with-scalar-lists-arrays
// https://www.prisma.io/docs/concepts/components/prisma-client/filtering-and-sorting
// https://www.prisma.io/docs/reference/api-reference/error-reference
